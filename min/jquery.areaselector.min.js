jQuery.fn.areaSelecting=function(j){var j=jQuery.extend({items:".control",select:e,unselect:a,keyCode:18,useKey:true,areaId:"mms_item_selector",areaClass:"mms-item-selector",uiClass:"ui-widget-overlay",selectedClass:"selected-item",x0:0,y0:0},j);var f="px";var b=false;var h=null;var g=null;if(j.useKey){$(document).keydown(function(k){if(k.keyCode==j.keyCode){g=true}}).keyup(function(k){if(k.keyCode==j.keyCode){g=false}})}else{g=true}function d(n){if(!g){return}var k=$("<div/>",{id:j.areaId,"class":j.areaClass+" "+j.uiClass});$("body").append(k);h=$("#"+j.areaId);h.mouseup(i);h.mousemove(c);var l=n.pageX;var m=n.pageY;h.css({top:m+f,left:l+f,width:0+f,height:0+f});j.x0=l;j.y0=m;b=true}function c(q){if(!g||!b){return}if(h==null){return}if(h&&h.length<1){return}var m=j.x0;var p=j.y0;var o=q.pageY;var l=q.pageX;var n=o-p;var k=l-m;h.css({height:Math.abs(n)+f,width:Math.abs(k)+f});if(k<0&&n<0){h.css({top:o+f,left:l+f});jQuery(j.items).each(function(s,t){var r=$(this).offset().left;var u=$(this).offset().top;(u>=o&&u<=p&&r>=l&&r<=m)?j.select(this):null;(u<o||r<l)?j.unselect(this):null})}else{if(k<0&&n>=0){h.css({top:p+f,left:l+f});jQuery(j.items).each(function(s,t){var r=$(this).offset().left;var u=$(this).offset().top;(u<=o&&u>p&&r>=l&&r<=m)?j.select(this):null;(u<p||r<l)?j.unselect(this):null})}else{if(n<0&&k>=0){h.css({top:o+f,left:m+f});jQuery(j.items).each(function(s,t){var r=$(this).offset().left;var u=$(this).offset().top;(u>=o&&u<p&&r<l&&r>=m)?j.select(this):null;(u<o||r<m)?j.unselect(this):null})}else{h.css({top:p+f,left:m+f});jQuery(j.items).each(function(s,t){var r=$(this).offset().left;var u=$(this).offset().top;(u>=p&&u<=o&&r>=m&&r<=l)?j.select(this):null;(u>o||r>l)?j.unselect(this):null})}}}}function i(k){if(!h){return}h.remove();b=false}function e(k){$(k).addClass(j.selectedClass)}function a(k){$(k).removeClass(j.selectedClass)}$(document).mouseup(i);return jQuery(this).each(function(){$(this).mousedown(d);$(this).mousemove(c)})};